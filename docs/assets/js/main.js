"use strict";let data={palette:"",name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:""};const palette1=document.querySelector(".js-palette1"),palette2=document.querySelector(".js-palette2"),palette3=document.querySelector(".js-palette3"),card=document.querySelector(".js-preview-card"),imgCard=document.querySelector(".js-card-img"),fillForm=document.querySelector(".fill"),previewName=document.querySelector(".js-preview-name"),previewJob=document.querySelector(".js-preview-job"),linkedinIcon=document.querySelector(".js-linkedin-icon"),githubIcon=document.querySelector(".js-github-icon"),phoneIcon=document.querySelector(".js-phone-icon"),emailIcon=document.querySelector(".js-email-icon"),design=document.querySelector(".js-design"),fill=document.querySelector(".js-fill"),btnCreate=document.querySelector(".js-btn-create"),arrowDesignUp=document.querySelector(".js-arrow-design-up"),arrowFillUp=document.querySelector(".js-arrow-fill-up"),arrowShareUp=document.querySelector(".js-arrow-share-up"),arrowDesignDown=document.querySelector(".js-arrow-design-down"),arrowFillDown=document.querySelector(".js-arrow-fill-down"),arrowShareDown=document.querySelector(".js-arrow-share-down"),form=document.querySelector(".js-form"),inputs=document.querySelectorAll(".js-input"),btnReset=document.querySelector(".js-reset"),fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview"),linkTwitter=document.querySelector(".js-twitter"),submitBtn=document.querySelector(".js-btn-create"),linkCard=document.querySelector(".js-link-card"),shareSection=document.querySelector(".js-share-card"),functionEventPalettes=e=>{card.classList.remove("js-palette1"),card.classList.remove("js-palette2"),card.classList.remove("js-palette3"),card.classList.add(e.currentTarget.value),"js-palette1"===e.currentTarget.value?data.palette=1:"js-palette2"===e.currentTarget.value?data.palette=2:"js-palette3"===e.currentTarget.value&&(data.palette=3)};function getData(e){"name"===e.name?data.name=e.value:"job"===e.name?data.job=e.value:"email"===e.name?data.email=e.value:"phone"===e.name?data.phone=e.value:"github"===e.name?data.github=e.value:"linkedin"===e.name&&(data.linkedin=e.value)}function updateCard(){""===data.name?previewName.innerHTML="Nombre Apellido":previewName.innerHTML=data.name,""===data.job?previewJob.innerHTML="Front-end developer":previewJob.innerHTML=data.job,phoneIcon.href="tel:+34"+data.phone,emailIcon.href="mailto:"+data.email,linkedinIcon.href=data.linkedin,githubIcon.href=data.github}function handleInput(e){e.preventDefault();getData(e.target),saveInLocalStorage(data),updateCard()}function handleClick(e){e.target.classList.contains("js-arrow-design-up")||e.target.classList.contains("js-arrow-design-down")?(design.classList.remove("collapsed"),fill.classList.add("collapsed"),btnCreate.classList.add("collapsed"),arrowDesignUp.classList.remove("collapsed"),arrowDesignDown.classList.add("collapsed"),arrowFillUp.classList.add("collapsed"),arrowFillDown.classList.remove("collapsed"),arrowShareUp.classList.add("collapsed"),arrowShareDown.classList.remove("collapsed")):e.target.classList.contains("js-arrow-fill-up")||e.target.classList.contains("js-arrow-fill-down")?(fill.classList.remove("collapsed"),design.classList.add("collapsed"),btnCreate.classList.add("collapsed"),arrowFillUp.classList.remove("collapsed"),arrowFillDown.classList.add("collapsed"),arrowShareUp.classList.add("collapsed"),arrowShareDown.classList.remove("collapsed"),arrowDesignUp.classList.add("collapsed"),arrowDesignDown.classList.remove("collapsed")):(e.target.classList.contains("js-arrow-share-up")||e.target.classList.contains("js-arrow-share-down"))&&(btnCreate.classList.remove("collapsed"),design.classList.add("collapsed"),fill.classList.add("collapsed"),arrowShareUp.classList.remove("collapsed"),arrowShareDown.classList.add("collapsed"),arrowDesignUp.classList.add("collapsed"),arrowDesignDown.classList.remove("collapsed"),arrowFillUp.classList.add("collapsed"),arrowFillDown.classList.remove("collapsed"))}function handleReset(e){e.preventDefault();for(const e of inputs)e.classList.contains("fill__img--inputImg")||(e.value="",e.href="",profileImage.style="background-image: url(./assets/images/giphy.gif)",profilePreview.style.backgroundImage="",getData(e),localStorage.removeItem("data"),updateCard())}function getImage(e){const a=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(a)}function writeImage(){console.log(fr.result),data.photo=fr.result,console.log(data),profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`}function handleCreate(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card/",{method:"POST",body:JSON.stringify(data),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e.cardURL),shareSection.classList.remove("hidden"),linkCard.innerHTML=e.cardURL,linkCard.href=e.cardURL,linkTwitter.href="https://twitter.com/intent/tweet?url="+e.cardURL})}function saveInLocalStorage(e){localStorage.setItem("data",JSON.stringify(e))}palette1.addEventListener("click",functionEventPalettes),palette2.addEventListener("click",functionEventPalettes),palette3.addEventListener("click",functionEventPalettes),fillForm.addEventListener("input",handleInput),form.addEventListener("click",handleClick),btnReset.addEventListener("click",handleReset),fileField.addEventListener("change",getImage),submitBtn.addEventListener("click",handleCreate);const dataSaved=JSON.parse(localStorage.getItem("data"));null!==dataSaved&&(data=dataSaved,updateCard(),inputs[0].value=data.name,inputs[1].value=data.job,profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`,inputs[3].value=data.email,inputs[4].value=data.tel,inputs[5].value=data.linkedin,inputs[6].value=data.github,shareSection.classList.add("hidden"));